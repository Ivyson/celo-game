<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Create account — Celo Game</title>

  <!-- Tailwind CDN (dev/demo use). Replace with your compiled Tailwind in production. -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-pink-800 flex items-center justify-center p-6">
  <main class="w-full max-w-lg bg-white/5 backdrop-blur-md border border-white/10 rounded-2xl shadow-2xl overflow-hidden">
    <div class="p-8 sm:p-10">
      <header class="mb-6 text-center">
        <div class="inline-flex items-center gap-3">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-black text-xl">CG</div>
          <div class="text-left">
            <h1 class="text-2xl sm:text-3xl font-extrabold text-white">Create your account</h1>
            <p class="text-sm text-white/80 mt-1">Join Celo Game — save progress, earn tokens.</p>
          </div>
        </div>
      </header>

      <form id="signupForm" class="space-y-4" novalidate>
        <div>
          <label for="username" class="block text-sm font-semibold text-white/90 mb-1">Username</label>
          <input id="username" name="username" type="text" required minlength="3" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Choose a username" aria-describedby="usernameHelp" />
          <p id="usernameHelp" class="text-xs text-white/60 mt-1">3+ characters. Visible to other players.</p>
        </div>

        <div>
          <label for="email" class="block text-sm font-semibold text-white/90 mb-1">Email</label>
          <input id="email" name="email" type="email" required class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="you@example.com" />
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <div>
            <label for="password" class="block text-sm font-semibold text-white/90 mb-1">Password</label>
            <div class="relative">
              <input id="password" name="password" type="password" required minlength="8" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="At least 8 characters" />
              <button type="button" id="togglePwd" class="absolute right-2 top-2 text-white/70 hover:text-white" aria-label="Toggle password visibility"></button>
            </div>
          </div>

          <div>
            <label for="confirmPassword" class="block text-sm font-semibold text-white/90 mb-1">Confirm</label>
            <input id="confirmPassword" name="confirmPassword" type="password" required minlength="8" class="w-full px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-500" placeholder="Repeat password" />
          </div>
        </div>

        <div>
          <label for="wallet" class="block text-sm font-semibold text-white/90 mb-1">Celo Wallet (optional)</label>
          <div class="flex gap-3">
            <input id="wallet" name="wallet" type="text" class="flex-1 px-4 py-3 rounded-xl bg-white/5 border border-white/10 text-white placeholder-white/60 focus:outline-none" placeholder="Paste wallet address or connect" />
            <button type="button" id="connectWallet" class="px-4 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-600 text-white font-semibold shadow-md hover:opacity-95">Connect Wallet</button>
          </div>
        </div>

        <div id="formError" class="text-sm text-red-400 hidden"></div>

        <div class="pt-2">
          <button id="submitBtn" type="submit" class="w-full py-3 rounded-2xl bg-gradient-to-r from-purple-600 to-pink-600 text-white font-extrabold text-lg shadow-lg hover:scale-[1.01] transition-transform">
            Create account
          </button>
        </div>

        <p class="text-center text-sm text-white/70 mt-3">
          Already have an account?
          <a href="./Login.html" class="text-white font-semibold underline ml-1">Sign in</a>
        </p>
      </form>

      <div id="successBox" class="mt-6 hidden bg-white/5 border border-white/10 p-4 rounded-lg text-white/90">
        <strong>Account created locally.</strong>
        <p class="mt-2 text-sm text-white/80">You can now sign in. (This demo stores data in localStorage — replace with real backend.)</p>
      </div>
    </div>
  </main>

  <script>
    // Basic client-side form handling & validation (demo).
    const form = document.getElementById('signupForm');
    const formError = document.getElementById('formError');
    const successBox = document.getElementById('successBox');
    const togglePwd = document.getElementById('togglePwd');
    const passwordInput = document.getElementById('password');
    const confirmInput = document.getElementById('confirmPassword');
    const connectWalletBtn = document.getElementById('connectWallet');

    togglePwd.addEventListener('click', () => {
      const t = passwordInput.type === 'password' ? 'text' : 'password';
      passwordInput.type = t;
      confirmInput.type = t;
      togglePwd.textContent = t === 'password' ? 'Show' : 'Hide';
    });

    connectWalletBtn.addEventListener('click', () => {
      // Placeholder: integrate Celo wallet connect here
      alert('Connect Celo wallet: implement wallet connect here.');
    });

    function validateEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      formError.classList.add('hidden');
      successBox.classList.add('hidden');

      const username = form.username.value.trim();
      const email = form.email.value.trim();
      const password = form.password.value;
      const confirm = form.confirmPassword.value;
      const wallet = form.wallet.value.trim();

      if (username.length < 3) return showError('Username must be at least 3 characters.');
      if (!validateEmail(email)) return showError('Please enter a valid email address.');
      if (password.length < 8) return showError('Password must be at least 8 characters.');
      if (password !== confirm) return showError('Passwords do not match.');

      // Demo saving — replace with fetch POST to your backend
      const users = JSON.parse(localStorage.getItem('cg_users') || '[]');
      if (users.find(u => u.email === email)) return showError('An account with this email already exists.');

      users.push({ id: crypto.randomUUID(), username, email, wallet: wallet || null, createdAt: new Date().toISOString() });
      localStorage.setItem('cg_users', JSON.stringify(users));

      successBox.classList.remove('hidden');
      form.reset();
    });

    function showError(msg) {
      formError.textContent = msg;
      formError.classList.remove('hidden');
    }
  </script>
</body>
</html>